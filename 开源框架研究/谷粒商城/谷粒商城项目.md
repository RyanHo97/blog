# 谷粒商城项目

一、环境搭建

1.安装VirtualBox

​	步骤：

- BIOS检查开启CPU的虚拟化。

- VirtualBox官网下载Window版本，安装

- 下载安装Vagrant

  https://www.vagrantup.com/downloads

  Windows 64-bit 版本

- 安装完成后提示重启电脑，重启后打开CMD输入vagrant，有提示信息说明安装成功了。

- 命令：vagrant init centos/7

- 命令：vagrant up （比较慢的）

- 命令：vagrant ssh 连虚拟机

#### 2.虚拟机网络设置

- vagrant 设置IP：打开CMD输入ipconfig，看到VirtualBox网卡的IPv4的地址。

  192.168.56.1

- 修改Vagrantfile此行

  \#config.vm.network "private_network", ip: "192.168.33.10" 

  config.vm.network "private_network", ip: "192.168.56.10" 

  保存

- 重启虚拟机的命令：vagrant reload

- 连接虚拟机，查看虚拟机ip，命令：ip addr

#### 3.测试网络互联

​	互相ping ip

#### 4.安装Docker

虚拟化容器技术。Docker基于镜像，可以秒级启动各种容器。每一种容器都是一个完整的运行环境，容器之间相互隔离。

Docker安装文档

https://docs.docker.com/

这里使用的是centos

https://docs.docker.com/engine/install/centos/

- 切换root用户，或使用sudo加命令

- 清除旧的Docker信息

  ```bash
   sudo yum remove docker \
                    docker-client \
                    docker-client-latest \
                    docker-common \
                    docker-latest \
                    docker-latest-logrotate \
                    docker-logrotate \
                    docker-engine
  ```

- 设置仓库

  ```bash
  sudo yum install -y yum-utils
  
  sudo yum-config-manager \
      --add-repo \
      https://download.docker.com/linux/centos/docker-ce.repo
  ```

- 安装Docker引擎

  ```bash
  sudo yum install docker-ce docker-ce-cli containerd.io
  ```

- 启动Docker

  ```bash
  sudo systemctl start docker
  ```

- 检查Docker版本

  ```bash
  docker -v
  ```

- 检查Docker下载了哪些个镜像

  ```bash
  sudo docker images
  ```

- 设置Docker开机自启

  ```bash
  sudo systemctl enable docker
  ```

#### 5.配置Docker镜像加速

打开阿里云-注册和登录-产品与服务-容器镜像服务-镜像工具-镜像加速器-选择centos

这个加速器地址为私有

只展示一部分命令

```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["加速器的地址"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

#### 6.Docker安装Mysql
