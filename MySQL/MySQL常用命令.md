# æ•°æ®åº“

ä¸€ã€æ•°æ®åº“çš„å¥½å¤„

1.å¯ä»¥æŒä¹…åŒ–æ•°æ®åˆ°æœ¬åœ°

2.ç»“æ„åŒ–æŸ¥è¯¢



äºŒã€æ•°æ®åº“çš„å¸¸è§æ¦‚å¿µâ­

1ã€DBï¼šæ•°æ®åº“ï¼Œå­˜å‚¨æ•°æ®çš„å®¹å™¨

2ã€DBMSï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæœ‰ç§°ä¸ºæ•°æ®åº“è½¯ä»¶æˆ–æ•°æ®åº“äº§å“ï¼Œç”¨äºåˆ›å»ºæˆ–ç®¡ç†DB

3ã€SQLï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºå’Œæ•°æ®åº“é€šä¿¡çš„è¯­è¨€ï¼Œä¸æ˜¯æŸä¸ªæ•°æ®åº“è½¯ä»¶ç‰¹æœ‰çš„ï¼Œè€Œæ˜¯å‡ ä¹æ‰€æœ‰çš„ä¸»æµæ•°æ®åº“è½¯ä»¶é€šç”¨çš„è¯­è¨€



ä¸‰ã€æ•°æ®åº“å­˜å‚¨æ•°æ®çš„ç‰¹ç‚¹

1ã€æ•°æ®å­˜æ”¾åˆ°è¡¨ä¸­ï¼Œç„¶åè¡¨åœ¨æ”¾åˆ°åº“ä¸­

2ã€ä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šå¼ è¡¨ï¼Œæ¯å¼ è¡¨å…·æœ‰å”¯ä¸€çš„è¡¨æ˜ç”¨æ¥æ ‡è¯†è‡ªå·±

3ã€è¡¨ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œåˆ—åˆç§°ä¸ºâ€œå­—æ®µâ€œï¼Œç›¸å½“äºjavaä¸­â€å±æ€§â€œ

4ã€è¡¨ä¸­çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œç›¸å½“äºjavaä¸­â€å¯¹è±¡â€œ



å››ã€å¸¸è§çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ

mysqlã€oracleã€db2ã€sqlserver



## Mysql

ä¸€ã€Mysqlçš„èƒŒæ™¯

å‰èº«å±äºç‘å…¸çš„ä¸€å®¶å…¬å¸ï¼ŒMySQL AB

08å¹´è¢«sunå…¬å¸æ”¶è´­

09å¹´è¢«oracleæ”¶è´­



äºŒã€MySQLçš„ä¼˜ç‚¹

1ã€å¼€æºã€å…è´¹ã€æˆæœ¬ä½

2ã€æ€§èƒ½é«˜ã€ç§»æ¤æ€§ä¹Ÿå¥½

3ã€ä½“ç§¯å°ã€ä¾¿äºå®‰è£…



ä¸‰ã€MySQLçš„å®‰è£…

å±äºc/sæ¶æ„çš„è½¯ä»¶ï¼Œä¸€èˆ¬æ¥è®²å®‰è£…æœåŠ¡ç«¯

ä¼ä¸šç‰ˆ

ç¤¾åŒºç‰ˆ



5.5

5.6

5.7

8.0



å››ã€MySQLæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢

æ–¹å¼ä¸€ï¼šé€šè¿‡å‘½ä»¤è¡Œ

net start æœåŠ¡å

net stop æœåŠ¡å

æ–¹å¼äºŒï¼šè®¡ç®—æœº--å³é”®--ç®¡ç†--æœåŠ¡



äº”ã€MySQLæœåŠ¡çš„ç™»å½•å’Œé€€å‡º



ç™»å½•ï¼šmysql ã€-h ä¸»æœºå -P ç«¯å£å·ã€‘ -u ç”¨æˆ·å -pæ˜ç 



é€€å‡ºï¼šexitæˆ–ctrl+C





## DQLè¯­è¨€

### ä¸€ã€è¯­æ³•

select æŸ¥è¯¢åˆ—è¡¨

from è¡¨åï¼›

### äºŒã€ç‰¹ç‚¹

1ã€æŸ¥è¯¢åˆ—è¡¨å¯ä»¥æ˜¯å­—æ®µã€å¸¸é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª

2ã€æŸ¥è¯¢ç»“æœæ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨



### ä¸‰ã€ç¤ºä¾‹

#å…ˆè¿›å…¥å½“å‰åº“
USE myemployees;

#æŸ¥è¯¢è¡¨ä¸­å•ä¸ªå­—æ®µ
SELECT last_name FROM employees;

#æŸ¥è¯¢è¡¨ä¸­å¤šä¸ªå­—æ®µ
SELECT last_name ,salary,email FROM employees;

#æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­—æ®µ,å¦‚æœæ˜¯*ä¼šè¾“å‡ºé»˜è®¤é¡ºåº
SELECT * FROM employees;

#'`'ç€é‡å·
SELECT `last_name` FROM employees;

#4.æŸ¥è¯¢å¸¸é‡å€¼
SELECT 100;
SELECT 'john';

#5.æŸ¥è¯¢è¡¨è¾¾å¼
SELECT 100%98;

#6.æŸ¥è¯¢å‡½æ•°
SELECT VERSION();

#7.èµ·åˆ«å

#ä¼˜ç‚¹ï¼š1.ä¾¿äºç†è§£ï¼Œ2.å¦‚æœè¦æŸ¥è¯¢çš„å­—æ®µæœ‰é‡åçš„æƒ…å†µ

#æ–¹å¼ä¸€ï¼šä½¿ç”¨AS

SELECT 100%98 AS ç»“æœ;
SELECT last_name AS 'å§“',first_name AS 'å' FROM employees;

#æ–¹å¼äºŒï¼šä½¿ç”¨ç©ºæ ¼

SELECT last_name å§“,first_name å FROM employees;

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢salaryï¼Œæ˜¾ç¤ºç»“æœä¸ºout putï¼ˆåˆ«åæœ‰ç‰¹æ®Šç¬¦å·éœ€è¦åŠ ä¸ŠåŒå¼•å·ï¼‰
SELECT salary AS "out put" FROM employees;

8.å»é‡

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ¶‰åŠåˆ°çš„æ‰€æœ‰çš„éƒ¨é—¨

SELECT DISTINCT department_id from employees;



#9.+å·çš„ä½œç”¨
#ä»…ä»…åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼šè¿ç®—ç¬¦
#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥åå’Œå§“è¿æ¥æˆä¸€ä¸ªå­—æ®µï¼Œå¹¶æ˜¾ç¤ºä¸º å§“å

SELECT last_name+first_name AS å§“å
FROM employees;



#ä½¿ç”¨CONCAT
SELECT CONCAT(last_name,first_name) AS å§“å
FROM employees;



ç»ƒä¹ ï¼š

#1.		ä¸‹é¢çš„è¯­å¥æ˜¯å¦å¯ä»¥æ‰§è¡ŒæˆåŠŸ
SELECT last_name,job_id,salary AS sal
FROM employees;

#2.		ä¸‹é¢çš„è¯­å¥æ˜¯å¦å¯ä»¥æ‰§è¡ŒæˆåŠŸ
SELECT * FROM employees;

#3.		æ‰¾å‡ºä¸‹é¢è¯­å¥ä¸­çš„é”™è¯¯
#SELECT employee_id,last_name,salary*12 â€œANNUAL SALARYâ€ 
#FROM employees;
#ä¸­æ–‡çš„åŒå¼•å·â€œâ€
SELECT employee_id,last_name,salary*12 "ANNUAL SALARY" 
FROM employees;

#4.æ˜¾ç¤ºè¡¨departmentsçš„ç»“æ„ï¼Œå¹¶æŸ¥è¯¢å…¶ä¸­çš„å…¨éƒ¨æ•°æ®
DESC departments;
SELECT * FROM departments;

#5.æ˜¾ç¤ºå‡ºè¡¨employeesä¸­çš„å…¨éƒ¨job_id(ä¸èƒ½é‡å¤)
SELECT DISTINCT job_id from employees;

#6.æ˜¾ç¤ºå‡ºè¡¨employessä¸­çš„å…¨éƒ¨åˆ—ï¼Œå„ä¸ªåˆ—ä¹‹é—´ç”¨é€—å·è¿æ¥ï¼Œåˆ—å¤´æ˜¾ç¤ºæˆOUT_PUT

SELECT 
				CONCAT(first_name,',',last_name,',',job_id) AS OUT_PUT
FROM
				employees;



#### æ¡ä»¶æŸ¥è¯¢

#è¿›é˜¶2ï¼šæ¡ä»¶æŸ¥è¯¢

/*
è¯­æ³•ï¼š
		select 
					æŸ¥è¯¢åˆ—è¡¨
		form
					è¡¨å
		where
					ç­›é€‰æ¡ä»¶ï¼›

åˆ†ç±»ï¼š


```txt
	ä¸€ã€æŒ‰æ¡ä»¶è¡¨è¾¾å¼ç­›é€‰
    æ¡ä»¶è¿ç®—ç¬¦ï¼š> < = != <> >= <=

	äºŒã€æŒ‰é€»è¾‘è¿ç®—ç¬¦ç­›é€‰

	é€»è¾‘è¿ç®—ç¬¦ï¼š
					&& || !
					and or not
	ä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢
					like
					between and
					in
					is null
```


#ä¸€ã€æŒ‰æ¡ä»¶è¡¨è¾¾å¼ç­›é€‰

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å·¥èµ„>12000çš„å‘˜å·¥ä¿¡æ¯

SELECT
*
FROM
employees
WHERE
salary>12000;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸ç­‰äº90å·çš„å‘˜å·¥åå’Œéƒ¨é—¨ç¼–å·
SELECT
				last_name,
				department_id
FROM
				employees
WHERE
				department_id!=90;



 #äºŒã€æŒ‰é€»è¾‘è¡¨è¾¾å¼ç­›é€‰

#æ¡ˆä¾‹1ï¼›æŸ¥è¯¢å·¥èµ„zåœ¨10000åˆ°20000ä¹‹é—´çš„å‘˜å·¥åï¼Œå·¥èµ„ä»¥åŠå¥–é‡‘
SELECT
				last_name,
				salary,
				commission_pct
FROM
				employees
WHERE
				salary>=10000 AND salary<=20000;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸æ˜¯åœ¨90åˆ°110ä¹‹é—´ï¼Œæˆ–è€…å·¥èµ„é«˜äº15000çš„å‘˜å·¥ä¿¡æ¯
SELECT
				*
FROM
				employees
WHERE
				NOT(department_id>=90 AND department_id<110) OR salary>15000;



#### æ¨¡ç³ŠæŸ¥è¯¢

#ä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢

#1.like

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å‘˜å·¥åä¸­åŒ…å«å­—ç¬¦açš„å‘˜å·¥ä¿¡æ¯

%ä»»æ„å¤šä¸ªå­—ç¬¦ï¼ŒåŒ…å«é›¶ä¸ªå­—ç¬¦

_ä»»æ„å•ä¸ªå­—ç¬¦

SELECT
				*
FROM
				employees
WHERE
				last_name LIKE '%a%';

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢å‘˜å·¥åä¸­ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºeï¼Œç¬¬äº”ä¸ªå­—ç¬¦ä¸ºaçš„å‘˜å·¥åå’Œå·¥èµ„

SELECT
				last_name,
				salary
FROM
				employees
WHERE
				last_name LIKE '__n_l%';

#æ¡ˆä¾‹3ï¼šæŸ¥è¯¢å‘˜å·¥åä¸­ç¬¬äºŒä¸ªå­—ç¬¦ä¸º_çš„å‘˜å·¥å

SELECT
				last_name
FROM
				employees
WHERE
				last_name LIKE '_$_%' ESCAPE	'$';
#/_ä¹Ÿæ˜¯å¯ä»¥è½¬ä¹‰

#2.between and
#Â·ä½¿ç”¨between and å¯ä»¥æé«˜è¯­å¥çš„ç®€æ´åº¦
#Â·åŒ…å«ä¸´ç•Œå€¼
#Â·ä¸¤ä¸ªä¸´ç•Œå€¼ä¸è¦è°ƒæ¢é¡ºåº


#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å‘˜å·¥ç¼–å·åœ¨100åˆ°120ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯

SELECT
				*
FROM
				employees
WHERE
				employee_id >=100 AND employee_id<=120;
#---------------------
SELECT
				*
FROM
				employees
WHERE
				employee_id BETWEEN 100 AND 120;



#3.in
#å«ä¹‰ï¼šåˆ¤æ–­æŸå­—æ®µçš„å€¼æ˜¯å¦å±äºinåˆ—è¡¨ä¸­çš„æŸä¸€é¡¹
#ç‰¹ç‚¹ï¼š 1ã€ä½¿ç”¨inæé«˜è¯­å¥ç®€æ´åº¦ 2ã€inåˆ—è¡¨çš„å€¼ç±»å‹å¿…é¡»ä¸€è‡´æˆ–è€…å…¼å®¹
#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥çš„å·¥ç§ç¼–å·æ˜¯ IT_PORGã€AD_VPã€AD_PRESä¸­çš„ä¸€ä¸ªå‘˜å·¥åå’Œå·¥ç§ç¼–å·

SELECT
				last_name,
				job_id
FROM
				employees
WHERE
				job_id='IT_PROT' OR job_id='AD_VP' OR job_id='AD_PRES';
#---------------------------
SELECT
				last_name,
				job_id
FROM
				employees
WHERE
				job_id IN('IT_PROT','AD_VP','AD_PRES');

#4.is null
#= æˆ– <>ä¸èƒ½ç”¨äºåˆ¤æ–­nullå€¼
#is null æˆ– is not null å¯ä»¥åˆ¤æ–­nullå€¼

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ²¡æœ‰å¥–é‡‘çš„å‘˜
SELECT
				last_name,
				commission_pct
FROM
				employees
WHERE
				commission_pct IS NULL;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜
SELECT
				last_name,
				commission_pct
FROM
				employees
WHERE
				commission_pct IS NOT NULL;

#------------ä»¥ä¸‹ä¸ºé”™è¯¯çš„

SELECT
				last_name,
				commission_pct
FROM
				employees
WHERE
				salary IS 12000;



#is null pk <=>

#IS NULL:ä»…ä»…å¯ä»¥åˆ¤æ–­nullå€¼ï¼Œå¯è¯»æ€§è¾ƒé«˜ï¼Œå»ºè®®ä½¿ç”¨
#<=>		:æ—¢å¯ä»¥åˆ¤æ–­nullå€¼ï¼Œåˆå¯ä»¥åˆ¤æ–­æ™®é€šçš„æ•°å€¼ï¼Œå¯è¯»æ€§è¾ƒä½


#2.æŸ¥è¯¢å‘˜å·¥å·ä¸º176å‘˜å·¥çš„å§“åå’Œéƒ¨é—¨å·å’Œå¹´è–ª

SELECT
				employee_id,
				last_name,
				department_id,
				salary*12*(1+IFNULL(commission_pct,0)) AS å¹´è–ª
FROM
				employees
WHERE
				employee_id = 176;



æµ‹è¯•é¢˜è¯¦è§£

#ä¸€ã€æŸ¥è¯¢æ²¡æœ‰å¥–é‡‘ï¼Œä¸”å·¥èµ„å°äº18000çš„salaryï¼Œlast_name
SELECT
				salary,last_name
FROM
				employees
WHERE
				commission_pct is NULL
AND
				salary<18000;

#äºŒã€æŸ¥è¯¢employeesè¡¨ä¸­ï¼Œjob_idä¸ä¸ºâ€˜ITâ€™æˆ–è€… å·¥èµ„ä¸º12000çš„å‘˜å·¥ä¿¡æ¯

SELECT
				*
FROM
				employees
WHERE
				job_id <>'IT'
OR
				salary=12000;

#ä¸‰ã€æŸ¥çœ‹éƒ¨é—¨departmentsè¡¨çš„ç»“æ„

DESC	departments;

#å››ã€æŸ¥è¯¢éƒ¨é—¨departmentsè¡¨ä¸­æ¶‰åŠåˆ°äº†å“ªäº›ä½ç½®ç¼–å·

SELECT
			DISTINCT location_id
FROM
			departments;

#äº”ã€ç»å…¸é¢è¯•é¢˜
#è¯•é—®ï¼šselect * from employees;å’Œ
#select * from employees where commission_pct like '%%' and last_name like '%%';
#ç»“æœæ˜¯å¦ä¸€æ ·ï¼Ÿå¹¶è¯´æ˜åŸå› 

#ç­”ï¼šä¸ä¸€æ ·ï¼å¦‚æœåˆ¤æ–­çš„å­—æ®µæœ‰nullå€¼



#### æ’åºæŸ¥è¯¢

#è¿›é˜¶3ï¼šæ’åºæŸ¥è¯¢
/*
å¼•å…¥ï¼š

SELECT * FROM employees;

è¯­æ³•ï¼š
			SELECT æŸ¥è¯¢åˆ—è¡¨
			FROM è¡¨
			ã€where ç­›é€‰æ¡ä»¶ã€‘
			ORDER BY æ’åºåˆ—è¡¨;
ç‰¹ç‚¹ï¼š
			1ã€ascä»£è¡¨çš„æ˜¯å‡åºï¼Œdescä»£è¡¨çš„æ˜¯é™åº
			å¦‚æœä¸å†™ï¼Œé»˜è®¤æ˜¯å‡åº
			2ã€order byå­å¥ä¸­å¯ä»¥æ”¯æŒå•ä¸ªå­—æ®µã€å¤šä¸ªå­—æ®µã€è¡¨è¾¾å¼ã€å‡½æ•°ã€åˆ«å
			3ã€order byå­å¥ä¸€èˆ¬æ˜¯æ”¾åœ¨æŸ¥è¯¢è¯­å¥çš„æœ€åé¢ï¼Œlimitå­—å¥é™¤å¤–

*/

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œè¦æ±‚å·¥èµ„ä»é«˜åˆ°ä½æ’åº
SELECT * FROM employees ORDER BY salary DESC;
SELECT * FROM employees ORDER BY salary ASC;

#æ¡ˆä¾‹2ï¼š æŸ¥è¯¢éƒ¨é—¨ç¼–å·>=90çš„å‘˜å·¥ä¿¡æ¯ï¼ŒæŒ‰å…¥èŒæ—¶é—´çš„å…ˆåè¿›è¡Œæ’åº
SELECT *
FROM employees
WHERE department_id>=90
ORDER BY hiredate ASC;

#æ¡ˆä¾‹3ï¼šæŒ‰å¹´è–ªçš„é«˜ä½æ˜¾ç¤ºå‘˜å·¥çš„ä¿¡æ¯å’Œ å¹´è–ªã€æŒ‰è¡¨è¾¾å¼æ’åºã€‘

SELECT *,salary*12*(1+IFNULL(commission_pct,0)) å¹´è–ª
FROM employees
ORDER BY salary*12*(1+IFNULL(commission_pct,0)) DESC;

#æ¡ˆä¾‹3ï¼šæŒ‰å¹´è–ªçš„é«˜ä½æ˜¾ç¤ºå‘˜å·¥çš„ä¿¡æ¯å’Œ å¹´è–ªã€æŒ‰åˆ«åæ’åºã€‘
SELECT *,salary*12*(1+IFNULL(commission_pct,0)) å¹´è–ª
FROM employees
ORDER BY å¹´è–ª DESC;

#æ¡ˆä¾‹5ï¼šæŒ‰å§“åçš„é•¿åº¦æ˜¾ç¤ºå‘˜å·¥çš„å§“åå’Œå·¥èµ„ã€æŒ‰å‡½æ•°æ’åºã€‘
SELECT	LENGTH(last_name) å­—èŠ‚é•¿åº¦,last_name,salary
FROM	employees
ORDER BY LENGTH(last_name) DESC;

#æ¡ˆä¾‹6ï¼šæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œè¦æ±‚å…ˆæŒ‰å·¥èµ„æ’åºï¼Œå†æŒ‰å‘˜å·¥ç¼–å·æ’åºã€æŒ‰å¤šä¸ªå­—æ®µæ’åºã€‘

SELECT	*
FROM employees
ORDER BY salary ASC,employee_id DESC;



æµ‹è¯•é¢˜è¯¦è§£



#1.æŸ¥è¯¢å‘˜å·¥çš„å§“åå’Œéƒ¨é—¨å·å’Œå¹´è–ªï¼ŒæŒ‰å¹´è–ªé™åº æŒ‰å§“åå‡åº
SELECT last_name,department_id,salary*12*(1+IFNULL(commission_pct,0)) å¹´è–ª
FROM	employees
ORDER BY å¹´è–ª DESC,last_name ASC;

#2.é€‰æ‹©å·¥èµ„ä¸åœ¨8000åˆ°17000çš„å‘˜å·¥çš„å§“åå’Œå·¥èµ„ï¼ŒæŒ‰å·¥èµ„é™åº
SELECT last_name,salary
FROM employees

WHERE	salary NOT BETWEEN 8000 AND 17000
ORDER BY salary DESC;

#3.æŸ¥è¯¢é‚®ç®±ä¸­åŒ…å«eçš„å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶å…ˆæŒ‰é‚®ç®±çš„å­—èŠ‚æ•°é™åºï¼Œå†æŒ‰éƒ¨é—¨å·å‡åº

SELECT *
FROM employees
WHERE email LIKE '%e%'
ORDER BY LENGTH(email) DESC,department_id ASC;



#### å¸¸è§å‡½æ•°

#è¿›é˜¶4ï¼šå¸¸è§å‡½æ•°
/*

æ¦‚å¿µï¼šç±»ä¼¼äºjavaçš„æ–¹æ³•ï¼Œå°†ä¸€ç»„é€»è¾‘è¯­å¥å°è£…åœ¨æ–¹æ³•ä½“ä¸­ï¼Œå¯¹å¤–æš´éœ²æ–¹æ³•å
å¥½å¤„ï¼š1ã€éšè—äº†å®ç°ç»†èŠ‚ 2ã€æé«˜ä»£ç çš„é‡ç”¨æ€§
è°ƒç”¨ï¼šselect å‡½æ•°å(å®å‚åˆ—è¡¨)ã€fromè¡¨ã€‘
ç‰¹ç‚¹ï¼š
			1ã€å«ä»€ä¹ˆï¼ˆå‡½æ•°åï¼‰
			2ã€å¹²ä»€ä¹ˆï¼ˆå‡½æ•°åŠŸèƒ½ï¼‰
åˆ†ç±»ï¼š
			1ã€å•è¡Œå‡½æ•°
			å¦‚ concatã€lengthã€ifnull
			2ã€åˆ†ç»„å‡½æ•°
			åŠŸèƒ½ï¼šåšç»Ÿè®¡ä½¿ç”¨ï¼Œåˆç§°ä¸ºç»Ÿè®¡å‡½æ•°ã€èšåˆå‡½æ•°ã€ç»„å‡½æ•°



##### å­—ç¬¦å‡½æ•°

#ä¸€ã€å­—ç¬¦å‡½æ•°

#1.length è·å–å‚æ•°å€¼çš„å­—èŠ‚ä¸ªæ•°
SELECT LENGTH('john');
SELECT LENGTH('å¼ ä¸‰ä¸°hahaha');

#SHOW VARIABLES LIKE '%char%'

#2.concat æ‹¼æ¥å­—ç¬¦ä¸²

SELECT CONCAT(last_name,'_',first_name) å§“å FROM employees;

#3.upperã€lower
SELECT UPPER('john');
SELECT LOWER('joHn');
#ç¤ºä¾‹ï¼šå°†å§“å˜å¤§å†™ï¼Œåå˜å°å†™ï¼Œç„¶åæ‹¼æ¥
SELECT CONCAT(UPPER(last_name),LOWER(first_name)) å§“å FROM	employees;

#4.substrã€substring
#æ³¨æ„ï¼šç´¢å¼•ä»1å¼€å§‹

#æˆªå–ä»æŒ‡å®šç´¢å¼•å¤„åé¢æ‰€æœ‰å­—ç¬¦
SELECT SUBSTR('æè«æ„çˆ±ä¸Šäº†é™†å±•å…ƒ' ,7) out_put;

#æˆªå–ä»æŒ‡å®šç´¢å¼•å¤„æŒ‡å®šå­—ç¬¦é•¿åº¦çš„å­—ç¬¦
SELECT SUBSTR('æè«æ„çˆ±ä¸Šäº†é™†å±•å…ƒ' ,1,3) out_put;

#æ¡ˆä¾‹ï¼šå§“åä¸­é¦–å­—ç¬¦å¤§å†™ï¼Œå…¶ä»–å­—ç¬¦æ¶ˆæ¯ç„¶åç”¨_æ‹¼æ¥ï¼Œæ˜¾ç¤ºå‡ºæ¥
SELECT CONCAT(UPPER(SUBSTR(last_name, 1,1)),'_',LOWER(SUBSTR(last_name,2))) out_put
FROM employees;

#5.instr è¿”å›å­—ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿”å›0

SELECT INSTR('æ¨ä¸æ‚”çˆ±ä¸Šäº†æ®·å…­ä¾ ','æ®·å…­ä¾ ') AS out_put;

#6.trim

SELECT LENGTH(TRIM('  å¼ ç¿ å±±  ')) AS out_put;

SELECT TRIM('aa' FROM 'aaaaaaaaaaå¼ aaaaç¿ å±±aaaaaaaa') out_put;

#7.lpad ç”¨æŒ‡å®šçš„å­—ç¬¦å®ç°å·¦å¡«å……æŒ‡å®šé•¿åº¦

SELECT LPAD('æ®·ç´ ç´ ',10,'*') AS out_put;
#å°äºå­—ç¬¦æœ¬èº«é•¿åº¦æˆªæ–­
SELECT LPAD('æ®·ç´ ç´ ',2,'*') AS out_put;

#8.rpad ç”¨æŒ‡å®šçš„å­—ç¬¦å®ç°å³å¡«å……æŒ‡å®šé•¿åº¦

SELECT RPAD('æ®·ç´ ç´ ',12,'*') AS out_put;

#9.replace æ›¿æ¢
SELECT REPLACE('å‘¨èŠ·è‹¥å‘¨èŠ·è‹¥å‘¨èŠ·è‹¥å‘¨èŠ·è‹¥å¼ æ— å¿Œçˆ±ä¸Šäº†å‘¨èŠ·è‹¥','å‘¨èŠ·è‹¥','èµµæ•') AS out_put;



##### æ•°å­¦å‡½æ•°

#äºŒã€æ•°å­¦å‡½æ•°

#round å››èˆäº”å…¥
SELECT ROUND(-1.55);
SELECT ROUND(1.567,2);

#ceil å‘ä¸Šå–æ•´ï¼Œè¿”å›>=è¯¥å‚æ•°çš„æœ€å°æ•´æ•°

SELECT CEIL(-1.02);

#floor å‘ä¸‹å–æ•´ è¿”å›<=è¯¥å‚æ•°çš„æœ€å¤§æ•´æ•°

#truncate æˆªæ–­
SELECT TRUNCATE(1.69999,1);

#modå–ä½™

#MOD(a,b): a-a/b*b

SELECT MOD(10,-3);
SELECT 10%3;



##### æ—¥æœŸå‡½æ•°

#ä¸‰ã€æ—¥æœŸå‡½æ•°

#now è¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸ+æ—¶é—´
SELECT NOW();

#curdate è¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸï¼Œä¸åŒ…å«æ—¶é—´
SELECT CURDATE();

#curtime è¿”å›å½“å‰æ—¶é—´ï¼Œä¸åŒ…å«æ—¥æœŸ
SELECT CURTIME();

#å¯ä»¥è·å–æŒ‡å®šçš„éƒ¨åˆ†ï¼Œå¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’
SELECT YEAR(NOW()) å¹´;
SELECT YEAR('1998-1-1') å¹´;

SELECT YEAR(hiredate) å¹´ FROM employees;

SELECT MONTH(NOW()) æœˆ;
SELECT MONTHNAME(NOW()) æœˆ;

#str_to_date å°†æ—¥æœŸæ ¼å¼çš„å­—ç¬¦è½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„æ—¥æœŸ

SELECT STR_TO_DATE('1998-3-2','%Y-%c-%d') AS out_put;

#æŸ¥è¯¢å…¥èŒæ—¥æœŸä¸º1992-4-3çš„å‘˜å·¥ä¿¡æ¯
SELECT * FROM employees WHERE hiredate = '1992-4-3';

SELECT * FROM employees WHERE hiredate = STR_TO_DATE('4-3 1992','%c-%d %Y');

#date_format å°†æ—¥æœŸè½¬æ¢æˆå­—ç¬¦

SELECT DATE_FORMAT(NOW(),'%yå¹´%mæœˆ%dæ—¥') AS out_put;

#æŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥åå’Œå…¥èŒæ—¥æœŸ(xxæœˆ/xxæ—¥ xxå¹´)
SELECT last_name,DATE_FORMAT(hiredate,'%mæœˆ/%dæ—¥ %yå¹´') å…¥èŒæ—¥æœŸ
FROM employees
WHERE commission_pct IS NOT NULL;



##### å…¶ä»–å‡½æ•°

#å››ã€å…¶ä»–å‡½æ•°

SELECT VERSION();
SELECT DATABASE();
SELECT USER();



##### æµç¨‹æ§åˆ¶å‡½æ•°

#äº”ã€æµç¨‹æ§åˆ¶å‡½æ•°
#1.ifå‡½æ•°ï¼š if else çš„æ•ˆæœ

SELECT IF(10<5,'å¤§','å°');

SELECT last_name,commission_pct,IF(commission_pct IS NULL,'æ²¡å¥–é‡‘ï¼Œå‘µå‘µ','æœ‰å¥–é‡‘ï¼Œå˜»å˜»') å¤‡æ³¨
FROM employees;

#æµç¨‹æ§åˆ¶å‡½æ•°
#1.ifå‡½æ•°ï¼š if else çš„æ•ˆæœ

SELECT IF(10<5,'å¤§','å°');

SELECT last_name,commission_pct,IF(commission_pct IS NULL,'æ²¡å¥–é‡‘ï¼Œå‘µå‘µ','æœ‰å¥–é‡‘ï¼Œå˜»å˜»') å¤‡æ³¨
FROM employees;



#caseå‡½æ•°çš„ä½¿ç”¨ä¸€ï¼šswitch case çš„æ•ˆæœ

/*

switch(å˜é‡æˆ–è¡¨è¾¾å¼){
		case å¸¸é‡1ï¼š è¯­å¥1;break;
		...
		default:è¯­å¥n;break;
}

mysqlä¸­

case
 è¦åˆ¤æ–­çš„å­—æ®µæˆ–è¡¨è¾¾å¼
when å¸¸é‡1 then è¦æ˜¾ç¤ºçš„å€¼1æˆ–è¯­å¥1;
when å¸¸é‡2 then è¦æ˜¾ç¤ºçš„å€¼2æˆ–è¯­å¥2;
...
else è¦æ˜¾ç¤ºçš„å€¼næˆ–è¯­å¥nï¼›
end
*/

/*æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„ï¼Œè¦æ±‚

éƒ¨é—¨å·=30ï¼Œ æ˜¾ç¤ºçš„å·¥èµ„ä¸º1.1å€
éƒ¨é—¨å·=40ï¼Œ æ˜¾ç¤ºçš„å·¥èµ„ä¸º1.2å€
éƒ¨é—¨å·=50ï¼Œ æ˜¾ç¤ºçš„å·¥èµ„ä¸º1.3å€
å…¶ä»–éƒ¨é—¨ï¼Œæ˜¾ç¤ºçš„å·¥èµ„ä¸ºåŸå·¥èµ„

*/

SELECT salary åŸå§‹å·¥èµ„,department_id,
CASE department_id
WHEN 30 THEN salary*1.1
WHEN 40 THEN salary*1.2
WHEN 50 THEN salary*1.3
ELSE salary
END AS æ–°å·¥èµ„
FROM employees;



#caseå‡½æ•°çš„ä½¿ç”¨äºŒï¼šç±»ä¼¼äº å¤šé‡if
/*
javaä¸­ï¼š
if(æ¡ä»¶1){
			è¯­å¥1;
}else if(æ¡ä»¶2){
			è¯­å¥2;
}
...
else{
			è¯­å¥n;
}

mysqlä¸­ï¼š

case
when æ¡ä»¶1 then è¦æ˜¾ç¤ºçš„å€¼1æˆ–è¯­å¥1
when æ¡ä»¶2 then è¦æ˜¾ç¤ºçš„å€¼2æˆ–è¯­å¥2
...
else è¦æ˜¾ç¤ºçš„å€¼næˆ–è¯­å¥n
end
*/

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„çš„æƒ…å†µ
/*
å¦‚æœå·¥èµ„>20000,æ˜¾ç¤ºAçº§åˆ«
å¦‚æœå·¥èµ„>15000,æ˜¾ç¤ºBçº§åˆ«
å¦‚æœå·¥èµ„>10000,æ˜¾ç¤ºCçº§åˆ«
å¦åˆ™ï¼Œæ˜¾ç¤ºDçº§åˆ«

*/
SELECT salary,
CASE
WHEN salary>20000 THEN 'A'
WHEN salary>15000 THEN 'B'
WHEN salary>10000 THEN 'C'
ELSE 'D'
END AS å·¥èµ„çº§åˆ«
FROM employees;



æ¡ˆä¾‹è®²è§£

#1.	æ˜¾ç¤ºç³»ç»Ÿæ—¶é—´(æ³¨ï¼š æ—¥æœŸ+æ—¶é—´)

SELECT NOW();

#2.	æŸ¥è¯¢å‘˜å·¥å·ï¼Œå§“åï¼Œå·¥èµ„ï¼Œä»¥åŠå·¥èµ„æé«˜20%åçš„ç»“æœï¼ˆnew salaryï¼‰

SELECT employee_id,last_name,salary*1.2 "new salary"
FROM employees;

#3. å°†å‘˜å·¥çš„å§“åæŒ‰é¦–å­—æ¯æ’åºï¼Œå¹¶å†™å‡ºå§“åçš„é•¿åº¦ï¼ˆlengthï¼‰

SELECT	LENGTH(last_name) é•¿åº¦,SUBSTR(last_name,1,1) é¦–å­—ç¬¦,last_name
FROM employees
ORDER BY é¦–å­—ç¬¦;

#4. åšä¸€ä¸ªæŸ¥è¯¢ï¼Œäº§ç”Ÿä¸‹é¢çš„ç»“æœ
/*
<last_name> earns <salary> monthly but wants <salary*3>
Deram Salary
King earns 24000 monthly but wants 72000

*/

SELECT CONCAT(last_name,' earn ',salary,' monthly but wants ',salary*3) AS "Dream Salary"
FROM employees
WHERE salary=24000;

#5. ä½¿ç”¨case-when,æŒ‰ç…§ä¸‹é¢çš„æ¡ä»¶ï¼š
/*
job    grade
AD_PRES  A
ST_MAN   B
IT_PROG  C
SA_REP   D
ST_CLERK E

*/

SELECT last_name,job_id AS job,
CASE job_id
WHEN 'AD_PRES' THEN 'A'
WHEN 'ST_MAN' THEN 'B'
WHEN 'IT_PROG' THEN 'C'
WHEN 'SA_REP' THEN 'D'
WHEN 'ST_CLERK' THEN 'F'
END AS Grade
FROM employees
WHERE job_id = 'AD_PRES';



#### åˆ†ç»„å‡½æ•°

##### åˆ†ç»„å‡½æ•°

#äºŒã€åˆ†ç»„å‡½æ•°
/*
åŠŸèƒ½ï¼šç”¨ä½œç»Ÿè®¡ä½¿ç”¨ï¼Œåˆç§°ä¸ºèšåˆå‡½æ•°æˆ–ç»Ÿè®¡å‡½æ•°æˆ–ç»„å‡½æ•°

åˆ†ç±»ï¼š
sum æ±‚å’Œã€avg å¹³å‡å€¼ã€max æœ€å¤§å€¼ã€min æœ€å°å€¼ã€count è®¡ç®—ä¸ªæ•°

ç‰¹ç‚¹ï¼š
1ã€sumã€avgä¸€èˆ¬ç”¨äºå¤„ç†æ•°å€¼å‹
   maxã€minã€countå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹
2ã€ä»¥ä¸Šåˆ†ç»„å‡½æ•°éƒ½å¿½ç•¥nullå€¼
3ã€å’Œdistinctæ­é…ï¼Œå®ç°å»é‡
4ã€countå‡½æ•°çš„å•ç‹¬ä»‹ç»
ä¸€èˆ¬ä½¿ç”¨count(*)ç”¨ä½œç»Ÿè®¡è¡Œæ•°
5ã€å’Œåˆ†ç»„å‡½æ•°ä¸€åŒæŸ¥è¯¢çš„å­—æ®µè¦æ±‚æ˜¯group byåçš„å­—æ®µ

*/

#1ã€ç®€å• çš„ä½¿ç”¨
SELECT SUM(salary) FROM employees;
SELECT AVG(salary) FROM employees;
SELECT MIN(salary) FROM employees;
SELECT MAX(salary) FROM employees;
SELECT COUNT(salary) FROM employees;

SELECT SUM(salary) å’Œ,AVG(salary) å¹³å‡,MAX(salary) æœ€é«˜,MIN(salary) æœ€ä½,COUNT(salary) ä¸ªæ•°
FROM employees;

SELECT SUM(salary) å’Œ,ROUND(AVG(salary),2) å¹³å‡,MAX(salary) æœ€é«˜,MIN(salary) æœ€ä½,COUNT(salary) ä¸ªæ•°
FROM employees;

#2ã€å‚æ•°æ”¯æŒå“ªäº›ç±»å‹

SELECT SUM(last_name),AVG(last_name) FROM employees;
SELECT SUM(hiredate),AVG(last_name) FROM employees;

SELECT MAX(last_name),MIN(last_name) FROM employees;
SELECT MAX(hiredate),MIN(hiredate) FROM employees;

SELECT COUNT(last_name) FROM employees;
SELECT COUNT(commission_pct) from employees;



#3ã€æ˜¯å¦å¿½ç•¥null

SELECT SUM(commission_pct),AVG(commission_pct),SUM(commission_pct)/35,SUM(commission_pct)/107 FROM employees;

SELECT MAX(commission_pct),MIN(commission_pct) FROM employees;

SELECT COUNT(commission_pct) FROM employees;



#4ã€å’Œdistinctæ­é…

SELECT SUM(DISTINCT salary),SUM(salary) FROM employees;

SELECT COUNT(DISTINCT salary),COUNT(salary) FROM employees;

#5ã€countå‡½æ•°çš„è¯¦ç»†ä»‹ç»

SELECT COUNT(salary) FROM employees;

SELECT COUNT(*) FROM employees;

SELECT COUNT(1) FROM employees;

#æ•ˆç‡ï¼š
#MYISAMå­˜å‚¨å¼•æ“ä¸‹ï¼ŒCOUNT(*)çš„æ•ˆç‡é«˜
#INNODBå­˜å‚¨å¼•æ“ä¸‹ï¼ŒCOUNT(*)å’ŒCOUNT(1)çš„æ•ˆç‡å·®ä¸å¤šï¼Œæ¯”COUNT(å­—æ®µ)è¦é«˜ä¸€äº›

#6ã€å’Œåˆ†ç»„å‡½æ•°ä¸€åŒæŸ¥è¯¢çš„å­—æ®µæœ‰é™åˆ¶

#è™½ç„¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯employee_idå€¼æ— æ„ä¹‰ã€‚

SELECT AVG(salary),employee_id FROM employees;



#æµ‹è¯•

#1.æŸ¥è¯¢å…¬å¸å‘˜å·¥å·¥èµ„çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼ï¼Œæ€»å’Œ

SELECT MAX(salary) mx_sal,MIN(salary) mi_sal,ROUND(AVG(salary),2) ag_sal,SUM(salary) sm_sal
FROM employees;

#2.æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­çš„æœ€å¤§å…¥èŒæ—¶é—´å’Œæœ€å°å…¥èŒæ—¶é—´çš„ç›¸å·®å¤©æ•° ï¼ˆDIFFRENCEï¼‰

#MAX(hiredate) MIN(hiredate)

SELECT DATEDIFF(MAX(hiredate),MIN(hiredate)) DIFFRENCE
FROM employees;

#æŸ¥çœ‹è‡ªå·±æ´»äº†å¤šå°‘å¤©äº†
SELECT DATEDIFF(NOW(),'1995-1-1');

#3.æŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸º90çš„å‘˜å·¥ä¸ªæ•°
SELECT COUNT(*) ä¸ªæ•°
FROM employees
WHERE department_id = 90;



##### åˆ†ç»„æŸ¥è¯¢

#è¿›é˜¶5ï¼šåˆ†ç»„æŸ¥è¯¢
/*
åˆ†ç»„æ•°æ®ï¼šGROUP BY å­å¥è¯­æ³•
è¯­æ³•ï¼š
				select åˆ†ç»„å‡½æ•°,åˆ—ï¼ˆè¦æ±‚å‡ºç°åœ¨group byçš„åé¢ï¼‰
				from è¡¨
				ã€where ç­›é€‰æ¡ä»¶ã€‘
				group by åˆ†ç»„çš„åˆ—è¡¨
				ã€order by å­å¥ã€‘
æ³¨æ„ï¼š
				æŸ¥è¯¢åˆ—è¡¨æ¯”è¾ƒç‰¹æ®Šï¼Œè¦æ±‚æ˜¯åˆ†ç»„å‡½æ•°å’Œgroup byåå‡ºç°çš„å­—æ®µ



ç‰¹ç‚¹ï¼š

â€‹			1ã€åˆ†ç»„æŸ¥è¯¢ä¸­çš„ç­›é€‰æ¡ä»¶åˆ†ä¸ºä¸¤ç±»

|            | æ•°æ®æº         | ä½ç½®               | å…³é”®å­— |
| ---------- | -------------- | ------------------ | ------ |
| åˆ†ç»„å‰ç­›é€‰ | åŸå§‹è¡¨         | group byå­å¥çš„å‰é¢ | where  |
| åˆ†ç»„åç­›é€‰ | åˆ†ç»„åçš„ç»“æœé›† | group byå­å¥çš„åé¢ | having |

â€‹	â‘ åˆ†ç»„å‡½æ•°åšæ¡ä»¶è‚¯å®šæ˜¯æ”¾åœ¨havingå­å¥ä¸­

â€‹	â‘¡èƒ½ç”¨åˆ†ç»„å‰ç­›é€‰çš„ï¼Œå°±ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨åˆ†ç»„å‰ç­›é€‰

â€‹			2ã€group byå­å¥æ”¯æŒå•ä¸ªå­—æ®µåˆ†ç»„ï¼Œå¤šä¸ªå­—æ®µåˆ†ç»„ï¼ˆå¤šä¸ªå­—æ®µä¹‹é—´ç”¨é€—å·éš”å¼€æ²¡æœ‰é¡ºåºè¦æ±‚ï¼‰ï¼Œè¡¨è¾¾å¼å‡½æ•°ï¼ˆç”¨çš„è¾ƒå°‘ï¼‰

â€‹			3ã€ä¹Ÿå¯ä»¥æ·»åŠ æ’åºï¼ˆæ’åºæ”¾åœ¨æ•´ä¸ªåˆ†ç»„æŸ¥è¯¢çš„æœ€åï¼‰



*/

#å¼•å…¥ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„
SELECT AVG(salary) FROM employees;

#ç®€å•çš„åˆ†ç»„æŸ¥è¯¢
#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ¯ä¸ªå·¥ç§çš„æœ€é«˜å·¥èµ„
SELECT MAX(salary),job_id
FROM employees
GROUP BY job_id;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æ¯ä¸ªä½ç½®ä¸Šçš„éƒ¨é—¨ä¸ªæ•°
SELECT COUNT(*),location_id
FROM departments
GROUP BY location_id;



#æ·»åŠ åˆ†ç»„å‰çš„ç­›é€‰æ¡ä»¶
#æ¡ˆä¾‹1ï¼šæ‹†çº¿å‘¢é‚®ç®±ä¸­åŒ…å«aå­—ç¬¦çš„ï¼Œæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„

SELECT AVG(salary),department_id
FROM employees
WHERE email LIKE '%a%'
GROUP BY department_id;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æœ‰å¥–é‡‘çš„æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹å‘˜å·¥çš„æœ€é«˜å·¥èµ„

SELECT last_name,MAX(salary),manager_id
FROM employees
WHERE commission_pct IS NOT NULL
GROUP BY manager_id;



#æ·»åŠ åˆ†ç»„åçš„ç­›é€‰æ¡ä»¶

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å“ªä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°>2

#â‘ æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°
SELECT COUNT(*),department_id
FROM employees
GROUP BY department_id;

#â‘¡æ ¹æ®â‘ çš„ç»“æœè¿›è¡Œç­›é€‰ï¼ŒæŸ¥è¯¢å“ªä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°>2

SELECT COUNT(*),department_id
FROM employees
GROUP BY department_id
HAVING COUNT(*)>2;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æ¯ä¸ªå·¥ç§æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„>12000çš„å·¥ç§ç¼–å·å’Œæœ€é«˜å·¥èµ„

#â‘ æŸ¥è¯¢æ¯ä¸ªå·¥ç§æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„

SELECT MAX(salary),job_id
FROM employees
WHERE commission_pct IS NOT NULL
GROUP BY job_id;

#â‘¡æ ¹æ®â‘ ç»“æœç»§ç»­ç­›é€‰ï¼Œæœ€é«˜å·¥èµ„>12000

SELECT MAX(salary),job_id
FROM employees
WHERE commission_pct IS NOT NULL
GROUP BY job_id
HAVING MAX(salary)>12000;

#æ¡ˆä¾‹3ï¼šæŸ¥è¯¢é¢†å¯¼ç¼–å·>102çš„æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹çš„æœ€ä½å·¥èµ„>5000çš„é¢†å¯¼ç¼–å·æ˜¯å“ªä¸ªï¼Œä»¥åŠå…¶æœ€ä½å·¥èµ„

#â‘ æŸ¥è¯¢æ¯ä¸ªé¢†å¯¼æ‰‹ä¸‹çš„å‘˜å·¥å›ºå®šæœ€ä½å·¥èµ„

SELECT MIN(salary),manager_id
FROM employees
GROUP BY manager_id

#â‘¡æ·»åŠ ç­›é€‰æ¡ä»¶ï¼šç¼–å·>102

SELECT MIN(salary),manager_id
FROM employees
WHERE manager_id>102
GROUP BY manager_id;

#â‘¢æ·»åŠ ç­›é€‰æ¡ä»¶ï¼šæœ€ä½å·¥èµ„>5000
SELECT MIN(salary),manager_id
FROM employees
WHERE manager_id>102
GROUP BY manager_id
HAVING MIN(salary)>5000;



#æŒ‰è¡¨è¾¾å¼æˆ–å‡½æ•°åˆ†ç»„

#æ¡ˆä¾‹ï¼šæŒ‰å‘˜å·¥å§“åçš„é•¿åº¦åˆ†ç»„ï¼ŒæŸ¥è¯¢æ¯ä¸€ç»„çš„å‘˜å·¥ä¸ªæ•°ï¼Œç­›é€‰å‘˜å·¥ä¸ªæ•°>5çš„æœ‰å“ªäº›

#â‘ æŸ¥è¯¢æ¯ä¸ªé•¿åº¦çš„å‘˜å·¥ä¸ªæ•°

SELECT COUNT(*),LENGTH(last_name) len_name
FROM employees
GROUP BY LENGTH(last_name);

#â‘¡æ·»åŠ ç­›é€‰æ¡ä»¶
SELECT COUNT(*) c,LENGTH(last_name) len_name
FROM employees
GROUP BY len_name
HAVING c>5;

#æŒ‰å¤šä¸ªå­—æ®µåˆ†ç»„

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨æ¯ä¸ªå·¥ç§çš„å‘˜å·¥çš„å¹³å‡å·¥èµ„

SELECT AVG(salary),department_id,job_id
FROM employees
GROUP BY job_id,department_id;

#æ·»åŠ æ’åº
#æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨æ¯ä¸ªå·¥ç§çš„å‘˜å·¥çš„å¹³å‡å·¥èµ„ï¼Œå¹¶ä¸”æŒ‰å¹³å‡å·¥èµ„çš„é«˜ä½æ˜¾ç¤º

SELECT AVG(salary),department_id,job_id
FROM employees
WHERE department_id IS NOT NULL
GROUP BY job_id,department_id
HAVING AVG(salary)>10000

ORDER BY AVG(salary) DESC;



æ¡ˆä¾‹è®²è§£ï¼š

#1.æŸ¥è¯¢ä¸ªjob_idçš„å‘˜å·¥å·¥èµ„çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼ï¼Œæ€»å’Œå¹¶æŒ‰job_idå‡åº

SELECT MAX(salary),MIN(salary),AVG(salary),SUM(salary),job_id
FROM employees
GROUP BY job_id
ORDER BY job_id;

#2.æŸ¥è¯¢å‘˜å·¥æœ€é«˜å·¥èµ„å’Œæœ€ä½å·¥èµ„çš„å·®è·ï¼ˆDIFFRENCEï¼‰
SELECT MAX(salary)-MIN(salary) DIFFRENCE
FROM employees;

#3.æŸ¥è¯¢å„ä¸ªç®¡ç†è€…æ‰‹ä¸‹å‘˜å·¥çš„æœ€ä½å·¥èµ„ï¼Œå…¶ä¸­æœ€ä½å·¥èµ„ä¸èƒ½ä½äº6000ï¼Œæ²¡æœ‰ç®¡ç†è€…çš„å‘˜å·¥ä¸è®¡ç®—åœ¨å†…
SELECT MIN(salary),manager_id
FROM employees
WHERE manager_id IS NOT NULL
GROUP BY manager_id
HAVING MIN(salary)>=6000;

#4.æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨çš„ç¼–å·ï¼Œå‘˜å·¥æ•°é‡å’Œå·¥èµ„å¹³å‡å€¼ï¼Œå¹¶æŒ‰å¹³å‡å·¥èµ„é™åº
SELECT department_id,COUNT(*),AVG(salary) a
FROM employees
GROUP BY department_id
ORDER BY a DESC;

#5.é€‰æ‹©å…·æœ‰å„ä¸ªjob_idçš„å‘˜å·¥äººæ•°
SELECT COUNT(*) ä¸ªæ•°,job_id
FROM employees
GROUP BY job_id;





#### è¿æ¥æŸ¥è¯¢

#è¿›é˜¶6ï¼šè¿æ¥æŸ¥è¯¢
/*
å«ä¹‰ï¼šåˆç§°å¤šè¡¨æŸ¥è¯¢ï¼Œå½“æŸ¥è¯¢çš„å­—æ®µæ¥è‡ªäºå¤šä¸ªè¡¨æ—¶ï¼Œå°±ä¼šç”¨åˆ°è¿æ¥æŸ¥è¯¢

ç¬›å¡å°”ä¹˜ç§¯æ¦‚å¿µï¼šå½“æŸ¥è¯¢å¤šä¸ªè¡¨æ—¶ï¼Œæ²¡æœ‰æ·»åŠ æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶ï¼Œå¯¼è‡´å¤šä¸ªè¡¨æ‰€æœ‰è¡Œå®ç°å®Œå…¨è¿æ¥

ç¬›å¡å°”ä¹˜ç§¯ç°è±¡ï¼šè¡¨1 æœ‰mè¡Œï¼Œè¡¨2 æœ‰nè¡Œï¼Œç»“æœ=m*nè¡Œ

å‘ç”ŸåŸå› ï¼šæ²¡æœ‰æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶
å¦‚ä½•é¿å…ï¼šæ·»åŠ æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶

åˆ†ç±»ï¼š
			æŒ‰å¹´ä»£åˆ†ç±»ï¼š
			sql92æ ‡å‡†ï¼šä»…ä»…æ”¯æŒå†…è¿æ¥
			sql99æ ‡å‡†ã€æ ‡å‡†ã€‘ï¼šæ”¯æŒå†…è¿æ¥+å¤–è¿æ¥ï¼ˆå·¦å¤–+å³å¤–ï¼‰+äº¤å‰è¿æ¥

```
		æŒ‰åŠŸèƒ½åˆ†ç±»ï¼š
					å†…è¿æ¥ï¼š
							ç­‰å€¼è¿æ¥
							éç­‰å€¼è¿æ¥
							è‡ªè¿æ¥
					å¤–è¿æ¥ï¼š
							å·¦å¤–è¿æ¥
							å³å¤–è¿æ¥
							å…¨å¤–è¿æ¥
					äº¤å‰è¿æ¥
```

*/

SELECT * FROM beauty;

SELECT * FROM boys;

SELECT NAME,boyName FROM boys,beauty
WHERE beauty.boyfriend_id = boys.id;



#ä¸€ã€sql92æ ‡å‡†





##### ç­‰å€¼è¿æ¥

#1ã€ç­‰å€¼è¿æ¥

/*

â‘ å¤šè¡¨ç­‰å€¼è¿æ¥çš„ç»“æœä¸ºå¤šè¡¨çš„äº¤é›†éƒ¨åˆ†
â‘¡nè¡¨è¿æ¥ï¼Œè‡³å°‘éœ€è¦n-1ä¸ªè¿æ¥æ¡ä»¶
â‘¢å¤šè¡¨çš„é¡ºåºæ²¡æœ‰è¦æ±‚
â‘£ä¸€èˆ¬éœ€è¦ä¸ºè¡¨èµ·åˆ«å
â‘¤å¯ä»¥æ­é…å‰é¢ä»‹ç»çš„æ‰€æœ‰å­å¥ä½¿ç”¨ï¼Œæ¯”å¦‚æ’åºã€åˆ†ç»„ã€ç­›é€‰

*/

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å¥³ç¥åå’Œå¯¹åº”çš„ç”·ç¥å
SELECT NAME,boyName
FROM boys,beauty
WHERE beauty.boyfriend_id = boys.id;



#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢å‘˜å·¥åå’Œå¯¹åº”çš„éƒ¨é—¨å

SELECT last_name,department_name
FROM employees,departments
WHERE	employees.department_id = departments.department_id;

#2ã€ä¸ºè¡¨èµ·åˆ«å
/*
æé«˜è¯­å¥çš„ç®€æ´åº¦
åŒºåˆ†å¤šä¸ªé‡åçš„å­—æ®µ

æ³¨æ„ï¼šå¦‚æœä¸ºè¡¨èµ·äº†åˆ«åï¼Œåˆ™æŸ¥è¯¢çš„å­—æ®µå°±ä¸èƒ½ä½¿ç”¨åŸæ¥çš„è¡¨åå»é™å®š

*/
#æŸ¥è¯¢å‘˜å·¥åã€å·¥ç§å·ã€å·¥ç§å

SELECT last_name,e.job_id,job_title
FROM employees e,jobs
WHERE e.job_id = jobs.job_id;

#3ã€ä¸¤ä¸ªè¡¨çš„èˆ’å¾æ˜¯å¦å¯ä»¥è°ƒæ¢

#æŸ¥è¯¢å‘˜å·¥åã€å·¥ç§å·ã€å·¥ç§å

SELECT last_name,e.job_id,job_title
FROM jobs,employees e
WHERE e.job_id = jobs.job_id;

#4ã€å¯ä»¥åŠ ç­›é€‰ï¼Ÿ

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥åã€éƒ¨é—¨å

SELECT last_name,department_name,commission_pct
FROM employees e,departments d
WHERE e.department_id=d.department_id
AND e.commission_pct IS NOT NULL;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢åŸå¸‚åä¸­ç¬¬äºŒä¸ªå­—ç¬¦ä¸ºoçš„éƒ¨é—¨åå’ŒåŸå¸‚å

SELECT department_name,city
FROM departments d,locations l
WHERE d.location_id = l.location_id
AND city LIKE '_o%';

#5ã€å¯ä»¥åŠ åˆ†ç»„ï¼Ÿ

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ¯ä¸ªåŸå¸‚çš„éƒ¨é—¨ä¸ªæ•°

SELECT COUNT(*) ä¸ªæ•°,city
FROM departments d,locations l
WHERE d.location_id = l.location_id
GROUP BY city;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æœ‰å¥–é‡‘çš„æ¯ä¸ªéƒ¨é—¨çš„éƒ¨é—¨åå’Œéƒ¨é—¨çš„é¢†å¯¼ç¼–å·å’Œè¯¥éƒ¨é—¨çš„æœ€ä½å·¥èµ„
SELECT department_name,d.manager_id,MIN(salary)
FROM departments d,employees e
WHERE d.department_id=e.department_id
AND commission_pct IS NOT NULL
GROUP BY department_name,d.manager_id;

#6ã€å¯ä»¥åŠ æ’åº

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ¯ä¸ªå·¥ç§çš„å·¥ç§åå’Œå‘˜å·¥çš„ä¸ªæ•°ï¼Œå¹¶ä¸”æŒ‰å‘˜å·¥ä¸ªæ•°é™åº

SELECT job_title,COUNT(*)
FROM employees e,jobs j
WHERE e.job_id=j.job_id
GROUP BY job_title
ORDER BY COUNT(*) DESC;

#7ã€å¯ä»¥å®ç°ä¸‰è¡¨è¿æ¥ï¼Ÿ

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥åã€éƒ¨é—¨åå’Œæ‰€åœ¨åŸå¸‚

SELECT last_name,department_name,city
FROM employees e,departments d,locations l
WHERE e.department_id=d.department_id
AND d.location_id=l.location_id;

##### éç­‰å€¼è¿æ¥

#1ã€éç­‰å€¼è¿æ¥

æ’å…¥job_gradesè¡¨åˆ°myemployessåº“

USE myemployees;
CREATE TABLE job_grades(
	grade_level VARCHAR(3),
	lowest_sal  INT,
	highest_sal INT
);

INSERT INTO job_grades
VALUES ('A', 1000, 2999);

INSERT INTO job_grades
VALUES ('B', 3000, 5999);

INSERT INTO job_grades
VALUES('C', 6000, 9999);

INSERT INTO job_grades
VALUES('D', 10000, 14999);

INSERT INTO job_grades
VALUES('E', 15000, 24999);

INSERT INTO job_grades
VALUES('F', 25000, 40000);



#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„å’Œå·¥èµ„çº§åˆ«SELECT salary,grade_level
FROM employees e,job_grades g
WHERE salary BETWEEN g.lowest_sal AND g.highest_sal;



##### è‡ªè¿æ¥

#1ã€è‡ªè¿æ¥

#æ¡ˆä¾‹ï¼šæŸ¥è¯¢ å‘˜å·¥åå’Œä¸Šçº§çš„åç§°

SELECT e.employee_id,e.last_name,m.employee_id,m.last_name
FROM employees e,employees m
WHERE e.manager_id = m.employee_id;

#ä¸€ã€æ˜¾ç¤ºå‘˜å·¥è¡¨çš„æœ€å¤§å·¥èµ„ï¼Œå·¥èµ„å¹³å‡å€¼

SELECT MAX(salary),AVG(salary)
FROM employees;

#äºŒã€æŸ¥è¯¢å‘˜å·¥è¡¨çš„employee_id,job_id,last_name,æŒ‰department_idé™åº,salaryå‡åº

SELECT employee_id,job_id,last_name
FROM employees
ORDER BY department_id DESC,salary ASC;

#ä¸‰ã€æŸ¥è¯¢å‘˜å·¥è¡¨çš„job_idä¸­åŒ…å« aå’Œeçš„ï¼Œå¹¶ä¸”a åœ¨eçš„å‰é¢

SELECT job_id
FROM employees
WHERE job_id LIKE '%a%e%';

#å››ã€å·²çŸ¥è¡¨student,é‡Œé¢æœ‰id(å­¦å·)ï¼Œnameï¼ŒgradeId(å¹´çº§ç¼–å·)

å·²çŸ¥è¡¨gradeï¼Œé‡Œé¢æœ‰id(å¹´çº§ç¼–å·)ï¼Œname(å¹´çº§å)

å·²çŸ¥è¡¨result,é‡Œé¢æœ‰idï¼Œscore,studentNo(å­¦å·)

#è¦æ±‚æŸ¥è¯¢æœ‰å§“åã€å¹´çº§åã€æˆç»©

SELECT name,name,score
FROM student s,grade g,result r
WHERE s.id=r.studentNo
AND g.id =s.gradeId;

#äº”ã€æ˜¾ç¤ºå½“å‰æ—¥æœŸï¼Œä»¥åŠå»å‰åç©ºæ ¼ï¼Œæˆªå–å­å­—ç¬¦ä¸²çš„å‡½æ•°
SELECT NOW();
SELECT trim('');
SELECT SUBSTR(str,startIndex);
SELECT SUBSTR(str,startIndex,length);



##### sql99è¯­æ³•

#äºŒã€sql99è¯­æ³•
/*
è¯­æ³•ï¼š
			SELECT æŸ¥è¯¢åˆ—è¡¨
			FROM è¡¨1 åˆ«å ã€è¿æ¥ç±»å‹ã€‘
			JOIN è¡¨2 åˆ«å
			ON è¿æ¥æ¡ä»¶
			ã€whereç­›é€‰æ¡ä»¶ã€‘
			ã€group by åˆ†ç»„ã€‘
			ã€having ç­›é€‰æ¡ä»¶ã€‘
			ã€order by æ’åºåˆ—è¡¨ã€‘

å†…è¿æ¥(â˜…)ï¼šinner
å¤–è¿æ¥
			å·¦å¤–(â˜…)ï¼šleftã€outerã€‘
			å³å¤–(â˜…)ï¼šrightã€outerã€‘
			å…¨å¤–ï¼šfullã€outerã€‘
äº¤å‰è¿æ¥ï¼šcross

*/

###### å†…è¿æ¥

#ä¸€ã€å†…è¿æ¥
/*
è¯­æ³•ï¼š

select æŸ¥è¯¢åˆ—è¡¨
from è¡¨1 åˆ«å
inner join è¡¨2 åˆ«å
on è¿æ¥æ¡ä»¶;

åˆ†ç±»ï¼š
ç­‰å€¼
éç­‰å€¼
è‡ªè¿æ¥

ç‰¹ç‚¹ï¼š
â‘ æ·»åŠ æ’åºã€åˆ†ç»„ã€ç­›é€‰
â‘¡innerå¯ä»¥çœç•¥
â‘¢ç­›é€‰æ¡ä»¶æ”¾åœ¨whereåé¢ï¼Œè¿æ¥æ¡ä»¶æ”¾åœ¨onåé¢ï¼Œæé«˜åˆ†ç¦»æ€§ï¼Œä¾¿äºé˜…è¯»
â‘£inner joinè¿æ¥å’Œsql92è¯­æ³•ä¸­çš„ç­‰å€¼è¿æ¥æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŸ¥è¯¢å¤šè¡¨çš„äº¤é›†ã€‚

*/

#1ã€ç­‰å€¼è¿æ¥
#æ¡ˆä¾‹1ã€æŸ¥è¯¢å‘˜å·¥åã€éƒ¨é—¨åï¼ˆè°ƒæ¢ä½ç½®ï¼‰

SELECT last_name,department_name
FROM employees e
INNER JOIN departments d
ON e.department_id = d.department_id;

#æ¡ˆä¾‹2ã€æŸ¥è¯¢åå­—ä¸­åŒ…å«eçš„å‘˜å·¥åå’Œå·¥ç§åï¼ˆæ·»åŠ ç­›é€‰ï¼‰
SELECT last_name,job_title
FROM employees e
INNER JOIN jobs j
ON e.job_id = j.job_id
WHERE e.last_name LIKE '%e%';

#3ã€æŸ¥è¯¢éƒ¨é—¨ä¸ªæ•°>3çš„åŸå¸‚åå’Œéƒ¨é—¨ä¸ªæ•°ï¼Œï¼ˆæ·»åŠ åˆ†ç»„+ç­›é€‰ï¼‰

#â‘ æŸ¥è¯¢æ¯ä¸ªåŸå¸‚çš„éƒ¨é—¨ä¸ªæ•°
#â‘¡åœ¨â‘ ç»“æœä¸Šç­›é€‰æ»¡è¶³æ¡ä»¶çš„
SELECT city,COUNT(*) éƒ¨é—¨ä¸ªæ•°
FROM departments d
INNER JOIN locations l
ON d.location_id=l.location_id
GROUP BY city
HAVING COUNT(*)>3;

#æ¡ˆä¾‹4ã€æŸ¥è¯¢å“ªä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°>3çš„éƒ¨é—¨åå’Œå‘˜å·¥ä¸ªæ•°ï¼Œå¹¶æŒ‰ä¸ªæ•°é™åºï¼ˆæ·»åŠ æ’åºï¼‰

#â‘ æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°
SELECT COUNT(*),department_name
FROM employees e
INNER JOIN departments d
ON e.department_id=d.department_id
GROUP BY department_name;

#â‘¡ åœ¨ â‘ ç»“æœä¸Šç­›é€‰å‘˜å·¥ä¸ªæ•°>3çš„è®°å½•ï¼Œå¹¶æ’åº
SELECT COUNT(*),department_name
FROM employees e
INNER JOIN departments d
ON e.department_id=d.department_id
GROUP BY department_name
HAVING COUNT(*)>3
ORDER BY COUNT(*) DESC;

#5.æŸ¥è¯¢å‘˜å·¥åã€éƒ¨é—¨åã€å·¥ç§åï¼Œå¹¶æŒ‰éƒ¨é—¨åé™åºï¼ˆä¸‰è¡¨è¿æ¥ï¼‰

SELECT last_name,department_name,job_title
FROM employees e
INNER JOIN departments d ON e.department_id=d.department_id
INNER JOIN jobs j ON e.job_id=j.job_id
ORDER BY department_name DESC;

#äºŒã€éç­‰å€¼è¿æ¥

#æŸ¥è¯¢å‘˜å·¥çš„å·¥èµ„çº§åˆ«

SELECT salary,grade_level
FROM employees e
JOIN job_grades g
ON e.salary BETWEEN g.lowest_sal AND g.highest_sal;

#æŸ¥è¯¢æ¯ä¸ªå·¥èµ„çº§åˆ«çš„ä¸ªæ•°>2çš„ä¸ªæ•°ï¼Œå¹¶ä¸”æŒ‰å·¥èµ„çº§åˆ«é™åº
SELECT COUNT(*),grade_level
FROM employees e
JOIN job_grades g
ON e.salary BETWEEN g.lowest_sal AND g.highest_sal
GROUP BY grade_level
HAVING COUNT(*)>20
ORDER BY grade_level DESC;

#ä¸‰ã€è‡ªè¿æ¥

#æŸ¥è¯¢å‘˜å·¥çš„åå­—ã€ä¸Šçº§çš„åå­—
SELECT e.last_name,m.last_name
FROM employees e
JOIN employees m
ON e.manager_id=m.employee_id
WHERE e.last_name LIKE '%k%';



###### å¤–è¿æ¥

#äºŒã€å¤–è¿æ¥

/*
åº”ç”¨åœºæ™¯ï¼šç”¨äºæŸ¥è¯¢ä¸€ä¸ªè¡¨ä¸­æœ‰ï¼Œå¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰çš„è®°å½•

ç‰¹ç‚¹ï¼š
1ã€å¤–è¿æ¥çš„æŸ¥è¯¢ç»“æœä¸ºä¸»è¡¨ä¸­çš„æ‰€æœ‰è®°å½•
			å¦‚æœä»è¡¨ä¸­æœ‰å’Œå®ƒåŒ¹é…çš„ï¼Œåˆ™æ˜¾ç¤ºåŒ¹é…çš„å€¼
			å¦‚æœä»è¡¨ä¸­æ²¡æœ‰å’Œå®ƒåŒ¹é…çš„ï¼Œåˆ™æ˜¾ç¤ºnull
			å¤–è¿æ¥æŸ¥è¯¢ç»“æœ=å†…è¿æ¥ç»“æœ+ä¸»è¡¨ä¸­æœ‰è€Œä»è¡¨æ²¡æœ‰çš„è®°å½•
2ã€å·¦å¤–è¿æ¥ï¼Œleft joinå·¦è¾¹çš„æ˜¯ä¸»è¡¨
   å³å¤–è¿æ¥ï¼Œright joinå³è¾¹çš„æ˜¯ä¸»è¡¨
3ã€å·¦å¤–å’Œå³å¤–äº¤æ¢ä¸¤ä¸ªè¡¨çš„é¡ºåºï¼Œå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœ

*/

#å¼•å…¥ï¼šæŸ¥è¯¢ç”·æœ‹å‹ ä¸åœ¨ç”·ç¥è¡¨çš„å¥³ç¥å

#å·¦å¤–è¿æ¥
SELECT  b.name
FROM beauty b
LEFT OUTER JOIN boys bo
ON b.boyfriend_id = bo.id
WHERE bo.id IS NULL;

#å³å¤–è¿æ¥
SELECT  b.*,bo.*
FROM boys bo
RIGHT OUTER JOIN beauty b
ON b.boyfriend_id = bo.id
WHERE b.id IS NULL;

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å“ªä¸ªéƒ¨é—¨æ²¡æœ‰å‘˜å·¥
#å·¦å¤–
SELECT d.*,e.employee_id
FROM departments d
LEFT OUTER JOIN employees e
ON d.department_id=e.department_id
WHERE e.employee_id IS NULL;

#å³å¤–
SELECT d.*,e.employee_id
FROM employees e
RIGHT OUTER JOIN departments d
ON d.department_id=e.department_id
WHERE e.employee_id IS NULL;



###### å…¨å¤–è¿æ¥

#å…¨å¤–è¿æ¥
/*
å¹¶é›†éƒ¨åˆ†

*/
USE girls;
SELECT b.*,bo.*
FROM beauty b
FULL OUTER JOIN boys bo
ON b.boyfriend_id = bo.id;

###### äº¤å‰è¿æ¥

#äº¤å‰è¿æ¥

#ç”¨sql99çš„æ ‡å‡†å®ç°äº†ç¬›å¡å°”ä¹˜ç§¯

SELECT b.*,bo.*
FROM beauty b
CROSS JOIN boys bo;



#sql92å’Œ sql99 pk
/*
åŠŸèƒ½ï¼šsql99æ”¯æŒçš„è¾ƒå¤š
å¯è¯»æ€§ï¼šsql99å®ç°è¿æ¥æ¡ä»¶å’Œç­›é€‰æ¡ä»¶çš„åˆ†ç¦»ï¼Œå¯è¯»æ€§è¾ƒé«˜

*/



æ¡ˆä¾‹è®²è§£ï¼Œå¤šè¡¨è¿æ¥

#äºŒã€æŸ¥è¯¢å“ªä¸ªåŸå¸‚æ²¡æœ‰éƒ¨é—¨

SELECT city
FROM departments d
RIGHT OUTER JOIN locations l
ON d.location_id=l.location_id
WHERE d.department_id IS NULL;

#ä¸‰ã€æŸ¥è¯¢éƒ¨é—¨åä¸ºSALæˆ–ITçš„å‘˜å·¥ä¿¡æ¯

SELECT e.*,d.department_name
FROM departments d
LEFT JOIN employees e
ON d.department_id=e.department_id
WHERE d.department_name IN('SAL','IT');

æŸ¥çœ‹éƒ¨é—¨ç¼–å·

SELECT * FROM departments
WHERE department_name IN('SAL','IT');



#### å­æŸ¥è¯¢ä»‹ç»

#è¿›é˜¶7ï¼šå­æŸ¥è¯¢
/*
å«ä¹‰ï¼š
å‡ºç°åœ¨å…¶ä»–è¯­å¥ä¸­çš„selectè¯­å¥ï¼Œç§°ä¸ºå­æŸ¥è¯¢æˆ–å†…æŸ¥è¯¢
å¤–éƒ¨çš„æŸ¥è¯¢è¯­å¥ï¼Œç§°ä¸ºä¸»æŸ¥è¯¢æˆ–å¤–æŸ¥è¯¢

åˆ†ç±»ï¼š
æŒ‰å­æŸ¥è¯¢å‡ºç°çš„ä½ç½®ï¼š
		selectåé¢ï¼š
						ä»…ä»…æ”¯æŒæ ‡é‡å­æŸ¥è¯¢
		fromåé¢ï¼š
						æ”¯æŒè¡¨å­æŸ¥è¯¢
		whereæˆ–havingåé¢ï¼šâ­
						æ ‡é‡å­æŸ¥è¯¢ï¼ˆå•è¡Œï¼‰ğŸ“Œ
						åˆ—å­æŸ¥è¯¢	ï¼ˆå¤šè¡Œï¼‰ğŸ“Œ

â€‹						è¡Œå­æŸ¥è¯¢
â€‹		existsåé¢ï¼ˆç›¸å…³å­æŸ¥è¯¢ï¼‰
â€‹						è¡¨å­æŸ¥è¯¢

æŒ‰ç»“æœé›†çš„è¡Œåˆ—æ•°ä¸åŒï¼š
		æ ‡é‡å­æŸ¥è¯¢ï¼ˆç»“æœé›†åªæœ‰ä¸€è¡Œä¸€åˆ—ï¼‰
		åˆ—å­æŸ¥è¯¢ï¼ˆç»“æœé›†åªæœ‰ä¸€åˆ—å¤šè¡Œï¼‰
		è¡Œå­æŸ¥è¯¢ï¼ˆç»“æœé›†æœ‰ä¸€è¡Œå¤šåˆ—ï¼‰
		è¡¨å­æŸ¥è¯¢ï¼ˆç»“æœé›†ä¸€èˆ¬ä¸ºå¤šè¡Œå¤šåˆ—ï¼‰

*/
#ç¤ºä¾‹ï¼š
SELECT first_name
FROM employees
WHERE department_id in(
		SELECT department_id FROM departments
		WHERE location_id=1700
);





##### whereæˆ–havingåé¢

#ä¸€ã€whereæˆ–havingåé¢
/*
1ã€æ ‡é‡å­æŸ¥è¯¢ï¼ˆå•è¡Œå­æŸ¥è¯¢ï¼‰
2ã€åˆ—å­æŸ¥è¯¢ï¼ˆå¤šè¡Œå­æŸ¥è¯¢ï¼‰

3ã€è¡Œå­æŸ¥è¯¢

ç‰¹ç‚¹ï¼š
â‘ å­æŸ¥è¯¢æ”¾åœ¨å°æ‹¬å·å†…
â‘¡å­æŸ¥è¯¢ä¸€èˆ¬æ”¾åœ¨æ¡ä»¶çš„å³ä¾§
â‘¢æ ‡é‡å­æŸ¥è¯¢ï¼Œä¸€èˆ¬æ­é…ç€å•è¡Œæ“ä½œç¬¦ä½¿ç”¨

> < >= <= = <>

åˆ—å­æŸ¥è¯¢
inã€any/someã€all

â‘£å­æŸ¥è¯¢çš„æ‰§è¡Œä¼˜å…ˆäºä¸»æŸ¥è¯¢æ‰§è¡Œï¼Œä¸»æŸ¥è¯¢çš„æ¡ä»¶ç”¨åˆ°äº†å­æŸ¥è¯¢çš„ç»“æœ

*/

###### æ ‡é‡å­æŸ¥è¯¢

#1.æ ‡é‡å­æŸ¥è¯¢

#æ¡ˆä¾‹1ï¼šè°çš„å·¥èµ„æ¯”Abelé«˜?

#â‘ æŸ¥è¯¢Abelçš„å·¥èµ„
SELECT salary
FROM employees
WHERE last_name = 'Abel';

#â‘¡æŸ¥è¯¢å‘˜å·¥çš„ä¿¡æ¯ï¼Œæ»¡è¶³ salary>â‘ ç»“æœ
SELECT *
FROM employees
WHERE salary>(
		SELECT salary
		FROM employees
		WHERE last_name = 'Abel'
);

#æ¡ˆä¾‹2ï¼šè¿”å›job_idä¸141å·å‘˜å·¥ç›¸åŒï¼Œsalaryæ¯”143å·å‘˜å·¥å¤šçš„å‘˜å·¥ å§“åï¼Œjob_id å’Œå·¥èµ„

#â‘ æŸ¥è¯¢141å·å‘˜å·¥çš„job_id
SELECT job_id
FROM employees
WHERE employee_id = 141;

#â‘¡æŸ¥è¯¢143å·å‘˜å·¥çš„salary
SELECT salary
FROM employees
WHERE employee_id = 143;

#â‘¢æŸ¥è¯¢å‘˜å·¥çš„å§“åï¼Œjob_idå’Œå·¥èµ„ï¼Œè¦æ±‚job_id=â‘ å¹¶ä¸”salary>â‘¡

SELECT last_name,job_id,salary
FROM employees
WHERE job_id=(
		SELECT job_id
		FROM employees
		WHERE employee_id = 141
)AND salary>(
		SELECT salary
		FROM employees
		WHERE employee_id = 143
);

#æ¡ˆä¾‹3ï¼šè¿”å›å…¬å¸å·¥èµ„æœ€å°‘çš„å‘˜å·¥çš„last_name,job_id,å’Œsalary

#â‘ æŸ¥è¯¢å…¬å¸çš„ æœ€ä½å·¥èµ„
SELECT MIN(salary)
FROM employees;

#â‘¡æŸ¥è¯¢last_name,job_idå’Œsalaryï¼Œè¦æ±‚salary=â‘ 
SELECT last_name,job_id,salary
FROM employees
WHERE salary=(
		SELECT MIN(salary)
		FROM employees
);

#æ¡ˆä¾‹4ï¼šæŸ¥è¯¢æœ€ä½å·¥èµ„å¤§äº50å·éƒ¨é—¨æœ€ä½å·¥èµ„çš„éƒ¨é—¨idå’Œå…¶æœ€ä½å·¥èµ„

#â‘ æŸ¥è¯¢50å·éƒ¨é—¨çš„æœ€ä½å·¥èµ„
SELECT MIN(salary)
FROM employees
WHERE department_id = 50;

#â‘¡æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„æœ€ä½å·¥èµ„

SELECT MIN(salary),department_id
FROM employees
GROUP BY department_id;

#â‘¢ç­›é€‰â‘¡ï¼Œæ»¡è¶³min(salary)>â‘ 

SELECT MIN(salary),department_id
FROM employees
GROUP BY department_id
HAVING MIN(salary)>(
		SELECT MIN(salary)
		FROM employees
		WHERE department_id = 50
);

#éæ³•ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢

#å¦‚æœç”¨å•è¡Œæ“ä½œç¬¦ï¼Œå­æŸ¥è¯¢ç»“æœå¿…é¡»å”¯ä¸€ä¸”æœ‰å€¼
SELECT MIN(salary),department_id
FROM employees
GROUP BY department_id
HAVING MIN(salary)>(
		SELECT salary
		FROM employees
		WHERE department_id = 50
);



##### åˆ—å­æŸ¥è¯¢

å¤šè¡Œæ¯”è¾ƒæ“ä½œç¬¦

| æ“ä½œç¬¦    | å«ä¹‰                           |
| --------- | ------------------------------ |
| IN/NOT IN | ç­‰äºåˆ—è¡¨ä¸­çš„**ä»»æ„ä¸€ä¸ª**       |
| ANY\|SOME | å’Œå­æŸ¥è¯¢è¿”å›çš„**æŸä¸€ä¸ª**å€¼æ¯”è¾ƒ |
| ALL       | å’Œå­æŸ¥è¯¢è¿”å›çš„**æ‰€æœ‰**å€¼æ¯”è¾ƒ   |

#2.åˆ—å­æŸ¥è¯¢ï¼ˆå¤šè¡Œå­æŸ¥è¯¢ï¼‰
#æ¡ˆä¾‹1ï¼šè¿”å›location_idæ˜¯1400æˆ–1700çš„éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥å§“å

#â‘ æŸ¥è¯¢location_idæ˜¯1400æˆ–1700çš„éƒ¨é—¨ç¼–å·
SELECT DISTINCT department_id
FROM departments
WHERE location_id IN(1400,1700);

#â‘¡æŸ¥è¯¢å‘˜å·¥å§“åï¼Œè¦æ±‚éƒ¨é—¨å·æ˜¯â‘ åˆ—è¡¨ä¸­çš„æŸä¸€ä¸ª
SELECT last_name
FROM employees
WHERE department_id IN(
		SELECT DISTINCT department_id
		FROM departments
		WHERE location_id IN(1400,1700)
);

#æ¡ˆä¾‹2ï¼šè¿”å›å…¶ä»–å·¥ç§ä¸­æ¯”job_idä¸º'IT_PROG'éƒ¨é—¨ä»»ä¸€å·¥èµ„ä½çš„å‘˜å·¥çš„å‘˜å·¥å·ã€å§“åã€job_idã€ä»¥åŠsalary

#â‘ æŸ¥è¯¢job_idä¸º'IT_PROG'éƒ¨é—¨ä»»ä¸€å·¥èµ„

SELECT DISTINCT salary
FROM employees
WHERE job_id = 'IT_PROG';

#â‘¡æŸ¥è¯¢å‘˜å·¥å·ã€å§“åã€job_id ä»¥åŠsalaryï¼Œsalary<(â‘ )çš„ä»»æ„ä¸€ä¸ª
SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary<ANY(
		SELECT DISTINCT salary
		FROM employees
		WHERE job_id = 'IT_PROG'
) AND job_id<>'IT_PROG';

#æˆ–
SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary<(
		SELECT MAX(salary)
		FROM employees
		WHERE job_id = 'IT_PROG'
) AND job_id<>'IT_PROG';

#æ¡ˆä¾‹3ï¼šè¿”å›å…¶ä»–éƒ¨é—¨ä¸­æ¯”job_idä¸º'IT_PROG'éƒ¨é—¨æ‰€æœ‰å·¥èµ„éƒ½ä½çš„å‘˜å·¥ çš„å‘˜å·¥å·ã€å§“åã€job_idã€ ä»¥åŠsalary

SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary<ALL(
		SELECT DISTINCT salary
		FROM employees
		WHERE job_id = 'IT_PROG'
) AND job_id<>'IT_PROG';

#æˆ–

SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary<(
		SELECT MIN(salary)
		FROM employees
		WHERE job_id = 'IT_PROG'
) AND job_id<>'IT_PROG';



#äºŒã€selectåé¢
/*
ä»…ä»…æ”¯æŒæ ‡é‡å­æŸ¥è¯¢
*/

#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°

SELECT d.*,(

			SELECT COUNT(*)
			FROM employees e
			WHERE e.department_id=d.department_id

) ä¸ªæ•°
FROM departments d;

#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢å‘˜å·¥å·=102çš„éƒ¨é—¨å

SELECT (

	SELECT department_name
	FROM departments d
	INNER JOIN employees e
	ON d.department_id=e.department_id
	WHERE e.employee_id=102

) éƒ¨é—¨å;
