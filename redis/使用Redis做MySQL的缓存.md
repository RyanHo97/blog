https://blog.csdn.net/zhaoyanmi/article/details/88025260

**1 为什么使用缓存**

**当网站的处理和访问量非常大的时候，我们的数据库的压力就变大了，数据库的连接池，数据库同时处理数据的能力就会受到很大的挑战，一旦数据库承受了其最大承受能力，网站的数据处理效率就会大打折扣。此时就要使用高并发处理、负载均衡和分布式数据库，而这些技术既花费人力，又花费资金。**

**2 使用场景**

**页面缓存经常用在CMS(content manage system)内存管理系统里面。**

**数据缓存经常会用在页面的具体数据里面。**

**请参考：**https://blog.csdn.net/zhaoyanmi/article/details/88025408

**3 Redis缓存原理**

**Redis其实就是说把表中经常访问的记录放在了Redis中，然后用户查询时先去查询Redis再去查询MySQL，确实实现了读写分离，也就是Redis只做读操作。由于缓存在内存中，所以查询会很快。**

**如何确定在redis查询还是Mysql查询：对于一个sql语句格式的数据请求，首先计算该语句的MD5并据此得到结果集标识符，然后利用该标识符在Redis中查找该结果集。注意，结果集中的每一行都有一个相应的键，这些键都存储在一个Redis集合结构中。如果Redis中不存在这样一个集合，说明要找的结果集不在Redis中，所以需要执行相应的sql语句，在Mysql中查询到相应的结果集，然后按照上面所说的办法把结果集中的每一行以字符串或哈希的形式存入Redis。**

**4 其他缓存策略**

**Redis+MySQL实现了读写分离，但是MySQL本身也可以读写分离，也就是分布式。另外，实现缓存的方式也有很多：MYSQL自带的缓存；DAO框架的缓存等。** 

**方法一：直接用Mysql 这种事情首先Mysql里面就有缓存，实现了类似的功能，如果需要缓存的东西很多，你可以把缓存的内存设置大一点。这样的好处就是你不用自己去控制缓存的失效，确保数据一致性。 MySQL查询会造成内存碎片等问题，请参考：**https://blog.csdn.net/zhaoyanmi/article/details/88025539

**方法二：启用DAO框架的缓存 比如Mybatis、Hibernate都是可以直接开启二级缓存，一般是用ehcache作为实现，你只要配置一下就行，无需额外操作。**

**方法三：自己实现 用AOP去在Dao层做一个切面，把调用的“类名+方法名+参数”作为key，查询结果作为value，每次调用去看一下是否已经缓存了，如果没有再去调用Dao的实现类。**

**5 选择Memcatched还是Redis1.性能上： 性能上都很出色，具体到细节，由于Redis只使用单核，而Memcached可以使用多核，所以平均每一个核上Redis在存储小数据时比 Memcached性能更高。而在100k以上的数据中，Memcached性能要高于Redis，虽然Redis最近也在存储大数据的性能上进行优化，但是比起 Memcached，还是稍有逊色。**

**2.内存空间和数据量大小： MemCached可以修改最大内存，采用LRU算法。Redis增加了VM的特性，突破了物理内存的限制。**

**3.操作便利上： MemCached数据结构单一，仅用来缓存数据，而Redis支持更加丰富的数据类型，也可以在服务器端直接对数据进行丰富的操作,这样可以减少网络IO次数和数据体积。**

**4.可靠性上： MemCached不支持数据持久化，断电或重启后数据消失，但其稳定性是有保证的。Redis支持数据持久化和数据恢复，允许单点故障，但是同时也会付出性能的代价。**

**5.应用场景： Memcached：动态系统中减轻数据库负载，提升性能；做缓存，适合多读少写，大数据量的情况（如人人网大量查询用户信息、好友信息、文章信息等）。 Redis：适用于对读写效率要求都很高，数据处理业务复杂和对安全性要求较高的系统（如新浪微博的计数和微博发布部分系统，对数据安全性、读写要求都很高）。 请参考：**https://blog.csdn.net/zhaoyanmi/article/details/88025653

**6 如何使用Redis做缓存用Redis作Mysql数据库缓存，必须解决2个问题。首先，应该确定用何种数据结构存储来自Mysql的数据；在确定数据结构之后，还要考虑用什么标识作为该数据结构的键。 直观上看，Mysql中的数据都是按表存储的；更微观地看，这些表都是按行存储的。每执行一次select查询，Mysql都会返回一个结果集，这个结果集由若干行组成。所以，一个自然而然的想法就是在Redis中找到一种对应于Mysql行的数据结构。Redis中提供了五种基本数据结构，即字符串（string）、列表（list）、哈希（hash）、集合（set）和有序集合（sorted set）。经过调研，发现适合存储行的数据结构有两种，即string和hash。 要把Mysql的行数据存入string，首先需要对行数据进行格式化。事实上，结果集的每一行都可以看做若干由字段名和其对应值组成的键值对集合。这种键值对结构很容易让我们想起Json格式。因此，这里选用Json格式作为结果集每一行的格式化模板。根据这一想法，我们可以实现将结果集格式化为若干Json对象，并将Json对象转化为字符串存入Redis的代码。**

请参考：https://blog.csdn.net/zhaoyanmi/article/details/88025721